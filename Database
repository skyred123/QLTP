USE [master]
GO
/****** Object:  Database [QLTP]    Script Date: 11/19/2022 10:20:41 PM ******/
CREATE DATABASE [QLTP]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'QLTP', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL15.SQLEXPRESS\MSSQL\DATA\QLTP.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'QLTP_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL15.SQLEXPRESS\MSSQL\DATA\QLTP_log.ldf' , SIZE = 73728KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT
GO
ALTER DATABASE [QLTP] SET COMPATIBILITY_LEVEL = 150
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [QLTP].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [QLTP] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [QLTP] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [QLTP] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [QLTP] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [QLTP] SET ARITHABORT OFF 
GO
ALTER DATABASE [QLTP] SET AUTO_CLOSE ON 
GO
ALTER DATABASE [QLTP] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [QLTP] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [QLTP] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [QLTP] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [QLTP] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [QLTP] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [QLTP] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [QLTP] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [QLTP] SET  ENABLE_BROKER 
GO
ALTER DATABASE [QLTP] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [QLTP] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [QLTP] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [QLTP] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [QLTP] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [QLTP] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [QLTP] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [QLTP] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [QLTP] SET  MULTI_USER 
GO
ALTER DATABASE [QLTP] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [QLTP] SET DB_CHAINING OFF 
GO
ALTER DATABASE [QLTP] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [QLTP] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [QLTP] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [QLTP] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
ALTER DATABASE [QLTP] SET QUERY_STORE = OFF
GO
USE [QLTP]
GO
/****** Object:  Table [dbo].[BangGia]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[BangGia](
	[MaBG] [uniqueidentifier] NOT NULL,
	[DienTich] [nchar](10) NULL,
 CONSTRAINT [PK_BangGia] PRIMARY KEY CLUSTERED 
(
	[MaBG] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ChucVu]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ChucVu](
	[MaCV] [uniqueidentifier] NOT NULL,
	[TenCV] [nvarchar](50) NULL,
 CONSTRAINT [PK_ChucVu] PRIMARY KEY CLUSTERED 
(
	[MaCV] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CT_HD]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CT_HD](
	[ThoiGian] [date] NULL,
	[MaPhong] [uniqueidentifier] NOT NULL,
	[MaHD] [uniqueidentifier] NOT NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CT_HDDV]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CT_HDDV](
	[ThoiGianSD] [date] NULL,
	[MaDV] [uniqueidentifier] NOT NULL,
	[MaHDDV] [uniqueidentifier] NOT NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DichVu]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DichVu](
	[MaDV] [uniqueidentifier] NOT NULL,
	[TenDV] [nvarchar](50) NULL,
	[GiaDV] [bigint] NULL,
 CONSTRAINT [PK_DichVu] PRIMARY KEY CLUSTERED 
(
	[MaDV] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[HD_DichVu]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[HD_DichVu](
	[MaHDDV] [uniqueidentifier] NOT NULL,
	[NgaySD] [date] NULL,
	[TongTien] [bigint] NULL,
	[MaPhong] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_HD_DichVu] PRIMARY KEY CLUSTERED 
(
	[MaHDDV] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[HopDong]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[HopDong](
	[MaHD] [uniqueidentifier] NOT NULL,
	[NgayKy] [date] NULL,
	[TongGia] [bigint] NULL,
	[MaNV] [char](10) NOT NULL,
	[MaKH] [char](10) NOT NULL,
 CONSTRAINT [PK_HopDong] PRIMARY KEY CLUSTERED 
(
	[MaHD] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[KhachHang]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[KhachHang](
	[MaKH] [char](10) NOT NULL,
	[TenKH] [nvarchar](50) NULL,
	[SDT] [nvarchar](50) NULL,
	[Email] [nvarchar](50) NULL,
 CONSTRAINT [PK_KhachHang] PRIMARY KEY CLUSTERED 
(
	[MaKH] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LoaiPhong]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LoaiPhong](
	[MaLoai] [uniqueidentifier] NOT NULL,
	[TenLoai] [nvarchar](50) NULL,
 CONSTRAINT [PK_LoaiPhong] PRIMARY KEY CLUSTERED 
(
	[MaLoai] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[NhanVien]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[NhanVien](
	[MaNV] [char](10) NOT NULL,
	[TenNV] [nvarchar](50) NULL,
	[SDT] [nvarchar](50) NULL,
	[Image] [image] NULL,
	[Email] [nvarchar](50) NULL,
	[MaCV] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_NhanVien] PRIMARY KEY CLUSTERED 
(
	[MaNV] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Phong]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Phong](
	[MaPhong] [uniqueidentifier] NOT NULL,
	[TenPhong] [nvarchar](50) NULL,
	[MaLoai] [uniqueidentifier] NOT NULL,
	[MaBG] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_Phong] PRIMARY KEY CLUSTERED 
(
	[MaPhong] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[User]    Script Date: 11/19/2022 10:20:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[User](
	[Name] [nvarchar](50) NULL,
	[Password] [nvarchar](50) NULL,
	[MaUser] [uniqueidentifier] NOT NULL,
	[MaNV] [char](10) NULL,
 CONSTRAINT [PK_User] PRIMARY KEY CLUSTERED 
(
	[MaUser] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[CT_HD]  WITH CHECK ADD  CONSTRAINT [FK_CT_HD_HopDong] FOREIGN KEY([MaHD])
REFERENCES [dbo].[HopDong] ([MaHD])
GO
ALTER TABLE [dbo].[CT_HD] CHECK CONSTRAINT [FK_CT_HD_HopDong]
GO
ALTER TABLE [dbo].[CT_HD]  WITH CHECK ADD  CONSTRAINT [FK_CT_HD_Phong] FOREIGN KEY([MaPhong])
REFERENCES [dbo].[Phong] ([MaPhong])
GO
ALTER TABLE [dbo].[CT_HD] CHECK CONSTRAINT [FK_CT_HD_Phong]
GO
ALTER TABLE [dbo].[CT_HDDV]  WITH CHECK ADD  CONSTRAINT [FK_CT_HDDV_DichVu] FOREIGN KEY([MaDV])
REFERENCES [dbo].[DichVu] ([MaDV])
GO
ALTER TABLE [dbo].[CT_HDDV] CHECK CONSTRAINT [FK_CT_HDDV_DichVu]
GO
ALTER TABLE [dbo].[CT_HDDV]  WITH CHECK ADD  CONSTRAINT [FK_CT_HDDV_HD_DichVu] FOREIGN KEY([MaHDDV])
REFERENCES [dbo].[HD_DichVu] ([MaHDDV])
GO
ALTER TABLE [dbo].[CT_HDDV] CHECK CONSTRAINT [FK_CT_HDDV_HD_DichVu]
GO
ALTER TABLE [dbo].[HD_DichVu]  WITH CHECK ADD  CONSTRAINT [FK_HD_DichVu_Phong] FOREIGN KEY([MaPhong])
REFERENCES [dbo].[Phong] ([MaPhong])
GO
ALTER TABLE [dbo].[HD_DichVu] CHECK CONSTRAINT [FK_HD_DichVu_Phong]
GO
ALTER TABLE [dbo].[HopDong]  WITH CHECK ADD  CONSTRAINT [FK_HopDong_KhachHang] FOREIGN KEY([MaKH])
REFERENCES [dbo].[KhachHang] ([MaKH])
GO
ALTER TABLE [dbo].[HopDong] CHECK CONSTRAINT [FK_HopDong_KhachHang]
GO
ALTER TABLE [dbo].[HopDong]  WITH CHECK ADD  CONSTRAINT [FK_HopDong_NhanVien] FOREIGN KEY([MaNV])
REFERENCES [dbo].[NhanVien] ([MaNV])
GO
ALTER TABLE [dbo].[HopDong] CHECK CONSTRAINT [FK_HopDong_NhanVien]
GO
ALTER TABLE [dbo].[NhanVien]  WITH CHECK ADD  CONSTRAINT [FK_NhanVien_ChucVu] FOREIGN KEY([MaCV])
REFERENCES [dbo].[ChucVu] ([MaCV])
GO
ALTER TABLE [dbo].[NhanVien] CHECK CONSTRAINT [FK_NhanVien_ChucVu]
GO
ALTER TABLE [dbo].[Phong]  WITH CHECK ADD  CONSTRAINT [FK_Phong_BangGia] FOREIGN KEY([MaBG])
REFERENCES [dbo].[BangGia] ([MaBG])
GO
ALTER TABLE [dbo].[Phong] CHECK CONSTRAINT [FK_Phong_BangGia]
GO
ALTER TABLE [dbo].[Phong]  WITH CHECK ADD  CONSTRAINT [FK_Phong_LoaiPhong] FOREIGN KEY([MaLoai])
REFERENCES [dbo].[LoaiPhong] ([MaLoai])
GO
ALTER TABLE [dbo].[Phong] CHECK CONSTRAINT [FK_Phong_LoaiPhong]
GO
ALTER TABLE [dbo].[User]  WITH CHECK ADD  CONSTRAINT [FK_User_NhanVien] FOREIGN KEY([MaNV])
REFERENCES [dbo].[NhanVien] ([MaNV])
GO
ALTER TABLE [dbo].[User] CHECK CONSTRAINT [FK_User_NhanVien]
GO
USE [master]
GO
ALTER DATABASE [QLTP] SET  READ_WRITE 
GO
INSERT INTO [dbo].[User] ([Name],[Password] ,[MaUser]) VALUES ('Admin','Admin','b05c1e0a-48b3-4d90-b638-0326cb7f00c1')
GO
INSERT INTO [dbo].[ChucVu]
           ([MaCV]
           ,[TenCV])
     VALUES
           ('48b4e792-dcc1-4c63-a44e-8a591f0046fd','Quản Lý')
		   INSERT INTO [dbo].[ChucVu]
           ([MaCV]
           ,[TenCV])
     VALUES
           ('ff49d4a2-6266-4b8f-ad51-934f4d2ab675','Nhân Viên')
GO
	INSERT INTO [dbo].[NhanVien]
			   ([MaNV]
			   ,[TenNV]
			   ,[MaCV])
		 VALUES
			   ('1234567890'
			   ,'Nguyen Van Thang'
			   ,'ff49d4a2-6266-4b8f-ad51-934f4d2ab675')
	GO
INSERT INTO [dbo].[User] ([Name],[Password] ,[MaUser],[MaNV]) VALUES ('Thang','Thang','b05c1e0a-48b3-4d90-b638-0326cb7f00c9','1234567890')
